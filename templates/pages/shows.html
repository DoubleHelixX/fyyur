{% extends 'layouts/main.html' %} {% block title %}Fyyur | Shows{% endblock %}
{% block content %}

<h2 class="h2_open" id="h2_featured" style="text-align: center; ">
  <i class="fas fa-caret-down show_content_color" id="fas_content_featured"></i>

  Featured Shows
  <i class="fas fa-caret-down show_content_color" id="fas_content_featured"></i>
</h2>
<div style="padding-bottom: 20px; display: flex; justify-content: center;">
  <button type="button" rel="tooltip" onclick="return popUpBay()" class="btn btn-success" style="justify-content: center;">
      <i class="material-icons">Get Featured!</i>
    </button>
</div>

<div class='featured_pane' id="pane_header_featured " style="display: block; justify-content: center;">

  <div class="row shows featured_row">
    {%for show in shows['upcoming'] %} 
      {%if loop.index < 7 %}
        <div class="col-sm-4 " >
          <div class="tile tile-show featured " > 
            <img style="box-shadow: 0 -1px 4px rgb(255, 255, 255), 0 -2px 10px #ff0, 0 -10px 20px #ff8000, 0 -18px 40px #F00;" src="{{ show.artist_image_link }}" alt="Artist Image" />
            <h4 style='color:rgb(255, 255, 255);'>{{ show.start_time|datetime('full') }}</h4>
            {%if show.artist_deleted%}
              <h5 style="color: rgb(255, 255, 255)">&#9940; {{ show.artist_name }} &#9940;</h5>
            {%else%}
              <h5>
                <a href="/artists/{{ show.artist_id }}">{{ show.artist_name }}</a>
              </h5>
            {%endif%}
            <p style='color:rgb(255, 255, 255);'>playing at</p>
            {%if show.venue_deleted%}
              <h5 style="color: rgb(255, 255, 255)">&#9940; {{ show.venue_name }} &#9940;</h5>
            {%else%}
              <h5>
                <a href="/venues/{{ show.venue_id }}">{{ show.venue_name }}</a>
              </h5>
            {%endif%}
          </div>
        </div>
      {% endif %} 
    {% endfor %}
  </div>
</div>

<!--                      LEFT OFF HEREEE    -->
<div id="myModal" class="modal" >
  <!-- Modal content -->
  <div class="modal-content">
  <span class="close">&times;</span>
  <!-- POP UP CONTENT -->
  <div class='popup_body'>
    <div class="popup_container">
      <form method="post" class="form popup_toggle" action="/artists/create">
        <!-- <h3 class="form-heading">List a new artist </h3> -->
        <input type="radio" id="choice1" name="choice" value="1hour">
        <label for="choice1">1 Hour</label>
  
        <input type="radio" id="choice2" name="choice" value="6hours">
        <label for="choice2">6 Hours</label>

        <input type="radio" id="choice3" name="choice" value="24hours">
        <label for="choice2">24 Hours</label>
  
        <div id="flap"><span class="content">1hour</span></div>
          
   
      </form>
            <!-- style='text-align: center; justify-content: center;' -->
    </div>

  </div>
  </div>
</div>


{% if ((shows['selected_pane']|string()) == 'pane_header_upcoming') or
((shows['selected_pane']|string()) == 'All') %}
<h2 class="h2_open" id="h2_upcoming" style="padding-top: 3rem">
  {{ shows['upcoming']|length }} Upcoming {% if shows['upcoming']|length ==
  1%}Show{% else %}Shows{% endif %}
  <button
    onclick="control_content_pane('h2_upcoming', 'show_upcoming', 'pane_header_upcoming', 'fas_content_upcoming')"
    id="show_upcoming"
    class="show_content_color h2_open"
  >
    <i class="fas fa-caret-down" id="fas_content_upcoming"></i>
  </button>
</h2>
<div id="pane_header_upcoming" style="display: block">
  {% else %}
  <h2 class="h2_close" id="h2_upcoming" style="padding-top: 3rem">
    {{ shows['upcoming']|length }} Upcoming {% if shows['upcoming']|length == 1
    %}Show{% else %}Shows{% endif %}
    <button
      onclick="control_content_pane('h2_upcoming', 'show_upcoming', 'pane_header_upcoming', 'fas_content_upcoming')"
      id="show_upcoming"
      class="hide_content_color"
    >
      <i class="fas fa-caret-right" id="fas_content_upcoming"></i>
    </button>
  </h2>
  <div id="pane_header_upcoming" style="display: none">
    {% endif %}
    <div class="genres">
      {% for genre in shows['genres'] %} {% if
      ((shows['selected_pane']|string()) == 'All') and (loop.index < 2) %}
      <span class="genre_selected">Search</span>
      <form
        style="display: inline; margin: 0"
        class=""
        method="GET"
        action="/shows/{{genre}}/pane_header_past"
      >
        <button type="submit" class="genre_unselected">All</button>
      </form>
      {% elif ((shows['selected_pane']|string()) == 'All') and (loop.index >= 2)
      %}
      <form
        style="display: inline; margin: 0"
        class=""
        method="GET"
        action="/shows/{{genre}}/pane_header_past"
      >
        <button type="submit" class="genre_unselected">{{ genre }}</button>
      </form>
      {% elif (shows['selected_genre']|string() == genre|string()) and
      (shows['selected_pane']|string() == 'pane_header_upcoming')%}
      <span class="genres genre_selected">{{ genre }}</span>
      {% elif ( shows['selected_pane']|string() == 'pane_header_past' ) and
      (loop.index < 2)%}
      <span class="genre_selected">All</span>
      {%else%}
      <form
        style="display: inline; margin: 0"
        class=""
        method="GET"
        action="/shows/{{genre}}/pane_header_upcoming"
      >
        <button type="submit" class="genre_unselected">{{ genre }}</button>
      </form>
      {%endif%} {% endfor %}
    </div>
    <div class="row shows">
      {%for show in shows['upcoming']%}
      <div class="col-sm-4">
        <div class="tile tile-show tinted">
          <img src="{{ show.artist_image_link }}" alt="Artist Image" />
          <h4>{{ show.start_time|datetime('full') }}</h4>
          {%if show.artist_deleted%}
          <h5 style="color: black">&#9940; {{ show.artist_name }} &#9940;</h5>
          {%else%}
          <h5>
            <a href="/artists/{{ show.artist_id }}">{{ show.artist_name }}</a>
          </h5>
          {%endif%}
          <p>playing at</p>
          {%if show.venue_deleted%}
          <h5 style="color: black">&#9940; {{ show.venue_name }} &#9940;</h5>
          {%else%}
          <h5>
            <a href="/venues/{{ show.venue_id }}">{{ show.venue_name }}</a>
          </h5>
          {%endif%}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  {% if ((shows['selected_pane']|string()) == 'pane_header_past') or
  ((shows['selected_pane']|string()) == 'All')%}
  <h2 class="h2_open" id="h2_past" style="padding-top: 3rem">
    {{ shows['past']|length }} Past {% if shows['past']|length == 1 %}Show{%
    else %}Shows{% endif %}
    <button
      onclick="control_content_pane('h2_past','show_past','pane_header_past','fas_content_past')"
      id="show_past"
      class="show_content_color h2_open"
    >
      <i class="fas fa-caret-down" id="fas_content_past"></i>
    </button>
  </h2>
  <div id="pane_header_past" style="display: block">
    {% else %}
    <h2 class="h2_close" id="h2_past" style="padding-top: 3rem">
      {{ shows['past']|length }} Past {% if shows['past']|length == 1 %}Show{%
      else %}Shows{% endif %}
      <button
        onclick="control_content_pane('h2_past','show_past','pane_header_past','fas_content_past')"
        id="show_past"
        class="hide_content_color"
      >
        <i class="fas fa-caret-right" id="fas_content_past"></i>
      </button>
    </h2>
    <div id="pane_header_past" style="display: none">
      {% endif %}
      <div class="genres">
        {% for genre in shows['genres'] %} {% if
        ((shows['selected_pane']|string()) == 'All') and (loop.index < 2) %}
        <span class="genre_selected">Search</span>
        <form
          style="display: inline; margin: 0"
          class=""
          method="GET"
          action="/shows/{{genre}}/pane_header_past"
        >
          <button type="submit" class="genre_unselected">All</button>
        </form>
        {% elif ((shows['selected_pane']|string()) == 'All') and (loop.index >=
        2) %}
        <form
          style="display: inline; margin: 0"
          class=""
          method="GET"
          action="/shows/{{genre}}/pane_header_past"
        >
          <button type="submit" class="genre_unselected">{{ genre }}</button>
        </form>
        {% elif(shows['selected_genre']|string() == genre|string()) and
        (shows['selected_pane']|string() == 'pane_header_past')%}
        <span class="genre_selected">{{ genre }}</span>
        {%elif (shows['selected_pane']|string() == 'pane_header_upcoming') and
        (loop.index < 2) %}
        <span class="genre_selected">All</span>
        {%else%}
        <form
          style="display: inline; margin: 0"
          class=""
          method="GET"
          action="/shows/{{genre}}/pane_header_past"
        >
          <button type="submit" class="genre_unselected">{{ genre }}</button>
        </form>
        {%endif%} {% endfor %}
      </div>
      <div class="row shows">
        {%for show in shows['past']%}
        <div class="col-sm-4">
          <div class="tile tile-show tinted">
            <img src="{{ show.artist_image_link }}" alt="Artist Image" />
            <h4>{{ show.start_time|datetime('full') }}</h4>
            {%if show.artist_deleted%}
            <h5 style="color: black">&#9940; {{ show.artist_name }} &#9940;</h5>
            {%else%}
            <h5>
              <a href="/artists/{{ show.artist_id }}">{{ show.artist_name }}</a>
            </h5>
            {%endif%}
            <p>playing at</p>
            {%if show.venue_deleted%}
            <h5 style="color: black">&#9940; {{ show.venue_name }} &#9940;</h5>
            {%else%}
            <h5>
              <a href="/venues/{{ show.venue_id }}">{{ show.venue_name }}</a>
            </h5>
            {%endif%}
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <script>
      function popUpBay(){
  // Get the modal
  var modal = document.getElementById("myModal");

  // Get the button that opens the modal
  var btn = document.getElementById("myBtn");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks on the button, open the modal
  modal.style.display = "block";
  

  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }


  }

      function control_content_pane(element_id, btn_id, pane_id, fas_id) {
        var past_x = document.getElementById(pane_id);
        var past_y = document.getElementById(fas_id);
        var past_h2 = document.getElementById(element_id);
        var past_btn = document.getElementById(btn_id);
        if (past_x.style.display === "none") {
          past_btn.className = "show_content_color h2_open";
          past_h2.className = "h2_open ";
          past_y.className = "fas fa-caret-down";
          past_x.style.display = "block";
        } else {
          past_btn.className = "hide_content_color";
          past_h2.className = "h2_close";
          past_y.className = "fas fa-caret-right";
          past_x.style.display = "none";
        }
      }



const st = {};

st.flap = document.querySelector('#flap');
st.toggle = document.querySelector('.popup_toggle');

st.choice1 = document.querySelector('#choice1');
st.choice2 = document.querySelector('#choice2');

st.flap.addEventListener('transitionend', () => {

    if (st.choice1.checked) {
        st.toggle.style.transform = 'rotateY(-15deg)';
        setTimeout(() => st.toggle.style.transform = '', 400);
    } else {
        st.toggle.style.transform = 'rotateY(15deg)';
        setTimeout(() => st.toggle.style.transform = '', 400);
    }

})

st.clickHandler = (e) => {

    if (e.target.tagName === 'LABEL') {
        setTimeout(() => {
            st.flap.children[0].textContent = e.target.textContent;
        }, 250);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    st.flap.children[0].textContent = st.choice2.nextElementSibling.textContent;
});

document.addEventListener('click', (e) => st.clickHandler(e));
    </script>
    {% endblock %}
